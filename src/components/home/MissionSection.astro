---
import { translations } from "../../locals/home/mission";
import { ShieldCheck, Scale, Users } from "@lucide/astro"; // icons

type Locale = "en" | "hi" | "fr";
const { local = "en" } = Astro.params ?? {};
const t = translations[local as Locale] || translations["en"];

// Mission points with icons
const missionPoints = [
  {
    icon: ShieldCheck,
    title: "Protection",
    text: "Protect and uphold the fundamental rights of every individual.",
  },
  {
    icon: Scale,
    title: "Justice",
    text: "Ensure access to fair justice systems for vulnerable communities.",
  },
  {
    icon: Users,
    title: "Equality",
    text: "Promote dignity, inclusion, and equal opportunities for all.",
  },
];
---

<section id="mission" class="bg-background text-foreground py-28 md:py-36 relative">

  <!-- Fade from hero -->
  <div class="absolute inset-x-0 top-0 h-24 bg-gradient-to-b from-black/40 to-transparent pointer-events-none"></div>

  <!-- Heading -->
  <div class="text-center mb-16">
    <h2 class="text-3xl md:text-4xl font-extrabold mb-3">{t.title}</h2>
    <div class="w-20 h-[4px] bg-primary mx-auto rounded-full"></div>
  </div>

  <!-- Cards -->
  <div class="max-w-6xl mx-auto px-4">
    <div class="grid md:grid-cols-3 gap-10">

      {missionPoints.map(({ icon: Icon, title, text }, i) => (
        <div
          class="mission-card opacity-0 translate-x-10 bg-primary/10 border border-primary/30
                 rounded-2xl shadow-lg p-8 backdrop-blur-md transition-all duration-[900ms]"
        >
          <!-- Icon + Title -->
          <div class="flex items-center gap-4 mb-5">
            <div class="p-3 rounded-xl bg-primary/20 text-primary">
              <Icon class="w-8 h-8" />
            </div>
            <h3 class="text-xl font-bold text-primary">{title}</h3>
          </div>

          <!-- Description -->
          <p class="text-foreground/90 leading-relaxed">{text}</p>
        </div>
      ))}

    </div>
  </div>

</section>

<script>
  const cards = document.querySelectorAll(".mission-card");

  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        const card = entry.target;

        if (entry.isIntersecting) {
          // ENTER viewport → slide LEFT
          card.classList.remove("opacity-0", "translate-x-10");
          card.classList.add("opacity-100", "translate-x-0");
        } else {
          // EXIT viewport → slide RIGHT
          card.classList.add("opacity-0", "translate-x-10");
          card.classList.remove("opacity-100", "translate-x-0");
        }
      });
    },
    { threshold: 0.3 }
  );

  cards.forEach((card) => observer.observe(card));
</script>
